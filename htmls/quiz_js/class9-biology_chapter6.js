// Quiz data for Improvement in Food Resources (Class 9 Biology) with 3 levels
const quizData = {
  level1: [
    {
      question: "What is the main source of food for humans?",
      options: ["Plants and Animals", "Water", "Air", "Soil"],
      answer: "Plants and Animals"
    },
    {
      question: "Which crop is a major source of carbohydrates?",
      options: ["Rice", "Pulses", "Vegetables", "Fruits"],
      answer: "Rice"
    },
    {
      question: "What is the purpose of crop rotation?",
      options: ["Maintain soil fertility", "Increase pests", "Reduce water", "Decrease yield"],
      answer: "Maintain soil fertility"
    },
    {
      question: "Which animal provides milk?",
      options: ["Cow", "Hen", "Goat", "Both A and C"],
      answer: "Both A and C"
    },
    {
      question: "What is the main source of protein in vegetarian diets?",
      options: ["Pulses", "Rice", "Wheat", "Fruits"],
      answer: "Pulses"
    },
    {
      question: "Which practice improves crop yield?",
      options: ["Irrigation", "Deforestation", "Overgrazing", "Soil erosion"],
      answer: "Irrigation"
    },
    {
      question: "What is the primary source of eggs?",
      options: ["Poultry", "Cattle", "Sheep", "Goats"],
      answer: "Poultry"
    },
    {
      question: "Which nutrient is rich in fish?",
      options: ["Omega-3 fatty acids", "Carbohydrates", "Vitamin C", "Fiber"],
      answer: "Omega-3 fatty acids"
    },
    {
      question: "What is the purpose of manures?",
      options: ["Enrich soil nutrients", "Reduce soil fertility", "Increase pests", "Dry the soil"],
      answer: "Enrich soil nutrients"
    },
    {
      question: "Which crop is grown in the kharif season?",
      options: ["Paddy", "Wheat", "Barley", "Mustard"],
      answer: "Paddy"
    },
    {
      question: "What is the main source of honey?",
      options: ["Bees", "Ants", "Butterflies", "Wasps"],
      answer: "Bees"
    },
    {
      question: "Which practice helps in pest control?",
      options: ["Use of pesticides", "Overwatering", "Deforestation", "Monoculture"],
      answer: "Use of pesticides"
    },
    {
      question: "What is the primary source of wool?",
      options: ["Sheep", "Cow", "Goat", "Hen"],
      answer: "Sheep"
    },
    {
      question: "Which crop is a major source of oil?",
      options: ["Groundnut", "Rice", "Wheat", "Pulses"],
      answer: "Groundnut"
    },
    {
      question: "What is the purpose of mixed cropping?",
      options: ["Reduce risk of crop failure", "Increase water use", "Reduce soil nutrients", "Increase pests"],
      answer: "Reduce risk of crop failure"
    },
    {
      question: "Which animal is used for meat production?",
      options: ["Pigs", "Cows", "Both A and B", "Sheep"],
      answer: "Both A and B"
    },
    {
      question: "What is the main source of vitamins in diet?",
      options: ["Fruits and Vegetables", "Rice", "Meat", "Oil"],
      answer: "Fruits and Vegetables"
    },
    {
      question: "Which crop is grown in the rabi season?",
      options: ["Wheat", "Paddy", "Maize", "Cotton"],
      answer: "Wheat"
    },
    {
      question: "What is the role of fertilizers?",
      options: ["Provide essential nutrients", "Reduce soil moisture", "Increase pests", "Decrease yield"],
      answer: "Provide essential nutrients"
    },
    {
      question: "Which practice improves water availability for crops?",
      options: ["Drip Irrigation", "Flooding", "Deforestation", "Overgrazing"],
      answer: "Drip Irrigation"
    }
  ],
  level2: [
    {
      question: "Which nutrient is improved by adding nitrogen fertilizers?",
      options: ["Protein synthesis", "Carbohydrate storage", "Fat production", "Vitamin synthesis"],
      answer: "Protein synthesis"
    },
    {
      question: "What is the purpose of intercropping?",
      options: ["Maximize land use", "Reduce yield", "Increase water loss", "Decrease soil nutrients"],
      answer: "Maximize land use"
    },
    {
      question: "Which animal is bred for high milk yield?",
      options: ["Jersey Cow", "Local Goat", "Wild Buffalo", "Sheep"],
      answer: "Jersey Cow"
    },
    {
      question: "What is the role of green manure?",
      options: ["Improve soil fertility", "Reduce water", "Increase pests", "Dry the soil"],
      answer: "Improve soil fertility"
    },
    {
      question: "Which crop is a legume that fixes nitrogen?",
      options: ["Peas", "Wheat", "Rice", "Maize"],
      answer: "Peas"
    },
    {
      question: "What is the purpose of hybridization in crops?",
      options: ["Develop better varieties", "Reduce yield", "Increase pests", "Decrease nutrients"],
      answer: "Develop better varieties"
    },
    {
      question: "Which animal is used for draught power?",
      options: ["Bullock", "Hen", "Goat", "Pig"],
      answer: "Bullock"
    },
    {
      question: "What is the main source of fish production?",
      options: ["Aquaculture", "Agriculture", "Horticulture", "Sericulture"],
      answer: "Aquaculture"
    },
    {
      question: "Which practice reduces soil erosion?",
      options: ["Contour Ploughing", "Overgrazing", "Deforestation", "Monoculture"],
      answer: "Contour Ploughing"
    },
    {
      question: "What is the role of vermicompost?",
      options: ["Enrich soil with organic matter", "Reduce water", "Increase pests", "Dry the soil"],
      answer: "Enrich soil with organic matter"
    },
    {
      question: "Which crop is grown for fodder?",
      options: ["Alfalfa", "Rice", "Wheat", "Cotton"],
      answer: "Alfalfa"
    },
    {
      question: "What is the purpose of crop protection management?",
      options: ["Prevent pest damage", "Reduce water use", "Decrease yield", "Increase soil erosion"],
      answer: "Prevent pest damage"
    },
    {
      question: "Which animal is bred for egg production?",
      options: ["Leghorn", "Jersey", "Sahiwal", "Murrah"],
      answer: "Leghorn"
    },
    {
      question: "What is the main source of silk?",
      options: ["Silkworms", "Sheep", "Cows", "Goats"],
      answer: "Silkworms"
    },
    {
      question: "Which practice improves soil aeration?",
      options: ["Tillage", "Overwatering", "Deforestation", "Monoculture"],
      answer: "Tillage"
    },
    {
      question: "What is the role of micronutrients in crops?",
      options: ["Support plant growth", "Reduce yield", "Increase pests", "Decrease water"],
      answer: "Support plant growth"
    },
    {
      question: "Which crop is a cash crop?",
      options: ["Cotton", "Wheat", "Rice", "Pulses"],
      answer: "Cotton"
    },
    {
      question: "What is the purpose of apiculture?",
      options: ["Honey production", "Milk production", "Egg production", "Meat production"],
      answer: "Honey production"
    },
    {
      question: "Which animal is used for leather?",
      options: ["Cow", "Hen", "Goat", "Sheep"],
      answer: "Cow"
    },
    {
      question: "What is the role of irrigation in agriculture?",
      options: ["Ensure water supply", "Reduce soil fertility", "Increase pests", "Decrease yield"],
      answer: "Ensure water supply"
    }
  ],
  level3: [
    {
      question: "Which nutrient is improved by adding phosphorus fertilizers?",
      options: ["Root development", "Leaf growth", "Stem strength", "Flower production"],
      answer: "Root development"
    },
    {
      question: "What is the purpose of genetic modification in crops?",
      options: ["Enhance resistance to pests", "Reduce yield", "Increase water use", "Decrease nutrients"],
      answer: "Enhance resistance to pests"
    },
    {
      question: "Which breed of cattle is known for drought resistance?",
      options: ["Sahiwal", "Jersey", "Holstein", "Ayrshire"],
      answer: "Sahiwal"
    },
    {
      question: "What is the role of biofertilizers?",
      options: ["Fix nitrogen naturally", "Reduce soil fertility", "Increase pests", "Dry the soil"],
      answer: "Fix nitrogen naturally"
    },
    {
      question: "Which crop is a hybrid variety of wheat?",
      options: ["Kalyan Sona", "Paddy", "Maize", "Barley"],
      answer: "Kalyan Sona"
    },
    {
      question: "What is the purpose of integrated pest management?",
      options: ["Reduce pesticide use", "Increase pest damage", "Reduce yield", "Decrease soil nutrients"],
      answer: "Reduce pesticide use"
    },
    {
      question: "Which animal is bred for high wool yield?",
      options: ["Merino Sheep", "Jersey Cow", "Leghorn Hen", "Murrah Buffalo"],
      answer: "Merino Sheep"
    },
    {
      question: "What is the main source of marine fish?",
      options: ["Open Sea", "Ponds", "Rivers", "Lakes"],
      answer: "Open Sea"
    },
    {
      question: "Which practice enhances soil microbial activity?",
      options: ["Organic Farming", "Monoculture", "Deforestation", "Overgrazing"],
      answer: "Organic Farming"
    },
    {
      question: "What is the role of crop rotation in pest control?",
      options: ["Disrupts pest life cycle", "Increases pests", "Reduces water", "Decreases yield"],
      answer: "Disrupts pest life cycle"
    },
    {
      question: "Which crop is a biofortified variety?",
      options: ["Golden Rice", "Wheat", "Barley", "Maize"],
      answer: "Golden Rice"
    },
    {
      question: "What is the purpose of sericulture?",
      options: ["Silk production", "Milk production", "Egg production", "Meat production"],
      answer: "Silk production"
    },
    {
      question: "Which animal is bred for high meat yield?",
      options: ["Broiler Chicken", "Jersey Cow", "Leghorn Hen", "Sahiwal"],
      answer: "Broiler Chicken"
    },
    {
      question: "What is the main source of biogas?",
      options: ["Cow Dung", "Crop Residue", "Both A and B", "Wood"],
      answer: "Both A and B"
    },
    {
      question: "Which practice improves nutrient cycling?",
      options: ["Cover Cropping", "Overgrazing", "Deforestation", "Monoculture"],
      answer: "Cover Cropping"
    },
    {
      question: "What is the role of macronutrients in plants?",
      options: ["Support overall growth", "Reduce yield", "Increase pests", "Decrease water"],
      answer: "Support overall growth"
    },
    {
      question: "Which crop is grown for biofuel?",
      options: ["Jatropha", "Wheat", "Rice", "Pulses"],
      answer: "Jatropha"
    },
    {
      question: "What is the purpose of pisciculture?",
      options: ["Fish farming", "Honey production", "Silk production", "Milk production"],
      answer: "Fish farming"
    },
    {
      question: "Which animal is used for manure production?",
      options: ["Cow", "Hen", "Goat", "Sheep"],
      answer: "Cow"
    },
    {
      question: "What is the role of drip irrigation in water conservation?",
      options: ["Delivers water efficiently", "Wastes water", "Increases soil erosion", "Reduces yield"],
      answer: "Delivers water efficiently"
    }
  ]
};

// Render quiz
function renderQuiz(level) {
  const quizContainer = document.getElementById("quizContainer");
  quizContainer.innerHTML = ""; // Clear previous questions
  quizData[level].forEach((item, index) => {
    const card = document.createElement("div");
    card.className = "card animate__animated animate__fadeInUp";
    card.innerHTML = `
      <div class="card__content">
        <h5>Q${index + 1}: ${item.question}</h5>
        ${item.options.map(option => `
          <label>
            <input type="radio" name="q${index}" value="${option}"> ${option}
          </label>
        `).join("")}
      </div>
    `;
    quizContainer.appendChild(card);
  });
}

// Check answers
function checkAnswers(level) {
  let score = 0;
  quizData[level].forEach((item, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    if (selected) {
      const userAnswer = selected.value;
      if (userAnswer === item.answer) {
        score++;
        selected.parentElement.style.color = "var(--correct-color)";
      } else {
        selected.parentElement.style.color = "var(--wrong-color)";
      }
    }
  });
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = `Your Score: ${score}/${quizData[level].length} ðŸŽ‰<br>${score === quizData[level].length ? "Full marks, bro! ðŸ˜Ž" : "Keep grinding! ðŸš€"}`;
  resultDiv.className = "result animate__animated animate__bounceIn";
}

// Level selection
document.addEventListener("DOMContentLoaded", () => {
  renderQuiz("level1"); // Default to Level 1
  document.getElementById("levelSelect").addEventListener("change", function () {
    const selectedLevel = this.value;
    renderQuiz(selectedLevel);
    document.getElementById("submitQuiz").onclick = () => checkAnswers(selectedLevel);
  });

  document.getElementById("submitQuiz").onclick = () => checkAnswers("level1");

  // Toggle sidebar
  document.querySelector('.navbar-toggler').addEventListener('click', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    sidebar.classList.toggle('active');
    main.classList.toggle('shifted');
  });

  // Responsive adjustment
  window.addEventListener('resize', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    if (window.innerWidth >= 1024) {
      sidebar.classList.remove('active');
      main.classList.remove('shifted');
      main.style.marginLeft = '250px';
    } else if (window.innerWidth >= 768) {
      main.style.marginLeft = sidebar.classList.contains('active') ? '0' : '200px';
    } else {
      main.style.marginLeft = '0';
    }
  });

  // Initial load adjustment
  window.addEventListener('load', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    if (window.innerWidth >= 1024) {
      main.style.marginLeft = '250px';
    } else if (window.innerWidth >= 768) {
      main.style.marginLeft = '200px';
    } else {
      main.style.marginLeft = '0';
    }
  });
});