const quizData = {
  level1: [
    {
      question: "The human eye forms the image of an object at its:",
      options: ["Cornea", "Retina", "Pupil", "Iris"],
      answer: "Retina"
    },
    {
      question: "The part of the eye that controls the amount of light entering is:",
      options: ["Pupil", "Lens", "Cornea", "Retina"],
      answer: "Pupil"
    },
    {
      question: "The lens in the human eye is:",
      options: ["Concave", "Convex", "Plano-concave", "Plano-convex"],
      answer: "Convex"
    },
    {
      question: "The ability of the eye to focus on near and far objects is called:",
      options: ["Accommodation", "Refraction", "Dispersion", "Reflection"],
      answer: "Accommodation"
    },
    {
      question: "The defect of vision where distant objects are not seen clearly is:",
      options: ["Hypermetropia", "Myopia", "Cataract", "Presbyopia"],
      answer: "Myopia"
    },
    {
      question: "The defect of vision where nearby objects are not seen clearly is:",
      options: ["Myopia", "Hypermetropia", "Astigmatism", "Presbyopia"],
      answer: "Hypermetropia"
    },
    {
      question: "The splitting of white light into its component colors is called:",
      options: ["Reflection", "Refraction", "Dispersion", "Scattering"],
      answer: "Dispersion"
    },
    {
      question: "The color of the sky appears blue due to:",
      options: ["Reflection", "Refraction", "Scattering", "Dispersion"],
      answer: "Scattering"
    },
    {
      question: "The phenomenon responsible for the formation of a rainbow is:",
      options: ["Reflection", "Refraction", "Dispersion", "Scattering"],
      answer: "Dispersion"
    },
    {
      question: "The least distance of distinct vision for a normal eye is:",
      options: ["25 cm", "50 cm", "10 cm", "100 cm"],
      answer: "25 cm"
    },
    {
      question: "The power of a lens is measured in:",
      options: ["Watt", "Dioptre", "Joule", "Candela"],
      answer: "Dioptre"
    },
    {
      question: "Myopia is corrected using a:",
      options: ["Convex lens", "Concave lens", "Cylindrical lens", "Bifocal lens"],
      answer: "Concave lens"
    },
    {
      question: "Hypermetropia is corrected using a:",
      options: ["Concave lens", "Convex lens", "Cylindrical lens", "Bifocal lens"],
      answer: "Convex lens"
    },
    {
      question: "The colored part of the human eye is the:",
      options: ["Retina", "Iris", "Pupil", "Cornea"],
      answer: "Iris"
    },
    {
      question: "The twinkling of stars is due to:",
      options: ["Refraction", "Reflection", "Atmospheric refraction", "Scattering"],
      answer: "Atmospheric refraction"
    },
    {
      question: "The band of seven colors formed by dispersion is called:",
      options: ["Spectrum", "Rainbow", "Prism", "Scattering"],
      answer: "Spectrum"
    },
    {
      question: "The outer transparent layer of the eye is called:",
      options: ["Retina", "Cornea", "Iris", "Pupil"],
      answer: "Cornea"
    },
    {
      question: "The defect of vision in old age is called:",
      options: ["Myopia", "Hypermetropia", "Presbyopia", "Astigmatism"],
      answer: "Presbyopia"
    },
    {
      question: "Which color scatters the most in sunlight?",
      options: ["Red", "Blue", "Green", "Yellow"],
      answer: "Blue"
    },
    {
      question: "The shape of the human eye lens changes due to the action of:",
      options: ["Ciliary muscles", "Optic nerve", "Retina", "Pupil"],
      answer: "Ciliary muscles"
    }
  ],
  level2: [
    {
      question: "A person cannot see objects beyond 2 m clearly. The defect is:",
      options: ["Myopia", "Hypermetropia", "Presbyopia", "Cataract"],
      answer: "Myopia"
    },
    {
      question: "A person cannot read a book kept at 25 cm. The defect is:",
      options: ["Myopia", "Hypermetropia", "Presbyopia", "Astigmatism"],
      answer: "Hypermetropia"
    },
    {
      question: "A lens with power +2 D is:",
      options: ["Concave, 0.5 m focal length", "Convex, 0.5 m focal length", "Concave, 2 m focal length", "Convex, 2 m focal length"],
      answer: "Convex, 0.5 m focal length"
    },
    {
      question: "The focal length of a lens with power -4 D is:",
      options: ["-0.25 m", "0.25 m", "-4 m", "4 m"],
      answer: "-0.25 m"
    },
    {
      question: "The angle of deviation in a prism is least for which color?",
      options: ["Red", "Blue", "Violet", "Green"],
      answer: "Red"
    },
    {
      question: "The sun appears red at sunrise due to:",
      options: ["Dispersion", "Scattering", "Reflection", "Refraction"],
      answer: "Scattering"
    },
    {
      question: "A person needs a lens of power -2 D to correct vision. The defect is:",
      options: ["Myopia", "Hypermetropia", "Presbyopia", "Astigmatism"],
      answer: "Myopia"
    },
    {
      question: "A person needs a lens of power +1.5 D. The focal length is:",
      options: ["0.67 m", "1.5 m", "0.5 m", "2 m"],
      answer: "0.67 m"
    },
    {
      question: "The near point of a hypermetropic eye is 1 m. The power of corrective lens is:",
      options: ["+4 D", "+3 D", "+2 D", "+1 D"],
      answer: "+3 D"
    },
    {
      question: "The far point of a myopic eye is 80 cm. The power of corrective lens is:",
      options: ["-1.25 D", "-2 D", "+1.25 D", "+2 D"],
      answer: "-1.25 D"
    },
    {
      question: "The phenomenon that makes stars twinkle is:",
      options: ["Dispersion", "Scattering", "Atmospheric refraction", "Reflection"],
      answer: "Atmospheric refraction"
    },
    {
      question: "The number of colors in a spectrum formed by a prism is:",
      options: ["5", "6", "7", "8"],
      answer: "7"
    },
    {
      question: "The power of a convex lens with focal length 50 cm is:",
      options: ["+2 D", "+1 D", "-2 D", "-1 D"],
      answer: "+2 D"
    },
    {
      question: "The defect corrected by a bifocal lens is:",
      options: ["Myopia", "Hypermetropia", "Presbyopia", "Astigmatism"],
      answer: "Presbyopia"
    },
    {
      question: "The angle of incidence for maximum deviation in a prism is for which color?",
      options: ["Red", "Blue", "Violet", "Green"],
      answer: "Violet"
    },
    {
      question: "The human eye can focus objects from 25 cm to infinity due to:",
      options: ["Pupil", "Ciliary muscles", "Cornea", "Retina"],
      answer: "Ciliary muscles"
    },
    {
      question: "The sky appears dark to astronauts because of:",
      options: ["No atmosphere", "No light", "No refraction", "No dispersion"],
      answer: "No atmosphere"
    },
    {
      question: "A myopic person has a far point of 1.5 m. The focal length of corrective lens is:",
      options: ["-1.5 m", "1.5 m", "-0.67 m", "0.67 m"],
      answer: "-1.5 m"
    },
    {
      question: "The scattering of light depends on:",
      options: ["Wavelength", "Intensity", "Reflection", "Refraction"],
      answer: "Wavelength"
    },
    {
      question: "The colors in a rainbow are arranged as:",
      options: ["VIBGYOR", "ROYGBIV", "BIVGYOR", "VIOGYBR"],
      answer: "VIBGYOR"
    }
  ],
  level3: [
    {
      question: "A hypermetropic eye has a near point of 50 cm. The power of corrective lens is:",
      options: ["+2 D", "+3 D", "+4 D", "+1 D"],
      answer: "+2 D"
    },
    {
      question: "A myopic eye has a far point of 2 m. The power of corrective lens is:",
      options: ["-0.5 D", "-1 D", "+0.5 D", "+1 D"],
      answer: "-0.5 D"
    },
    {
      question: "A lens of power +4 D is used to correct hypermetropia. The focal length is:",
      options: ["0.25 m", "0.5 m", "1 m", "4 m"],
      answer: "0.25 m"
    },
    {
      question: "The refractive index of a prism is highest for which color?",
      options: ["Red", "Blue", "Violet", "Green"],
      answer: "Violet"
    },
    {
      question: "A person needs bifocal lenses with powers +1 D and -2 D. The defects are:",
      options: ["Myopia and Presbyopia", "Hypermetropia and Myopia", "Hypermetropia and Presbyopia", "Myopia and Astigmatism"],
      answer: "Hypermetropia and Presbyopia"
    },
    {
      question: "The sun appears flattened at sunrise due to:",
      options: ["Dispersion", "Scattering", "Atmospheric refraction", "Reflection"],
      answer: "Atmospheric refraction"
    },
    {
      question: "A lens with focal length -25 cm has power:",
      options: ["-4 D", "+4 D", "-2 D", "+2 D"],
      answer: "-4 D"
    },
    {
      question: "The near point of a normal eye is 25 cm. For a hypermetropic eye at 75 cm, lens power is:",
      options: ["+2.67 D", "+1.33 D", "+4 D", "+3 D"],
      answer: "+2.67 D"
    },
    {
      question: "The far point of a myopic eye is 100 cm. The focal length of corrective lens is:",
      options: ["-1 m", "1 m", "-0.5 m", "0.5 m"],
      answer: "-1 m"
    },
    {
      question: "The sequence of colors in a spectrum from a prism is:",
      options: ["VIBGYOR", "ROYGBIV", "BIVGYOR", "VIOGYBR"],
      answer: "VIBGYOR"
    },
    {
      question: "The twinkling of stars is due to variation in:",
      options: ["Wavelength", "Refractive index", "Intensity", "Dispersion"],
      answer: "Refractive index"
    },
    {
      question: "A prism disperses white light because each color has a different:",
      options: ["Wavelength", "Intensity", "Amplitude", "Frequency"],
      answer: "Wavelength"
    },
    {
      question: "A person with presbyopia needs a lens of power +2 D for near vision. Focal length is:",
      options: ["0.5 m", "1 m", "0.25 m", "2 m"],
      answer: "0.5 m"
    },
    {
      question: "The scattering of light is inversely proportional to the power of:",
      options: ["Wavelength", "Frequency", "Intensity", "Amplitude"],
      answer: "Wavelength"
    },
    {
      question: "The advance sunrise is due to:",
      options: ["Dispersion", "Scattering", "Atmospheric refraction", "Reflection"],
      answer: "Atmospheric refraction"
    },
    {
      question: "A convex lens of power +3 D is used for hypermetropia. The near point of the eye is:",
      options: ["50 cm", "33.33 cm", "25 cm", "75 cm"],
      answer: "33.33 cm"
    },
    {
      question: "A myopic eye has a far point of 50 cm. The power of corrective lens is:",
      options: ["-2 D", "-1 D", "+2 D", "+1 D"],
      answer: "-2 D"
    },
    {
      question: "The human eye adjusts its focal length by changing the shape of the:",
      options: ["Cornea", "Lens", "Retina", "Pupil"],
      answer: "Lens"
    },
    {
      question: "The blue color of the sky is due to scattering of light by:",
      options: ["Dust particles", "Water droplets", "Air molecules", "Clouds"],
      answer: "Air molecules"
    },
    {
      question: "A prism produces a spectrum because of different:",
      options: ["Speeds of light", "Wavelengths", "Intensities", "Amplitudes"],
      answer: "Wavelengths"
    }
  ]
};

// Render quiz
function renderQuiz(level) {
  const quizContainer = document.getElementById("quizContainer");
  quizContainer.innerHTML = ""; // Clear previous questions
  quizData[level].forEach((item, index) => {
    const card = document.createElement("div");
    card.className = "card animate__animated animate__fadeInUp";
    card.innerHTML = `
      <div class="card__content">
        <h5>Q${index + 1}: ${item.question}</h5>
        ${item.options.map(option => `
          <label>
            <input type="radio" name="q${index}" value="${option}"> ${option}
          </label>
        `).join("")}
      </div>
    `;
    quizContainer.appendChild(card);
  });
}

// Check answers
function checkAnswers(level) {
  let score = 0;
  quizData[level].forEach((item, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    if (selected) {
      const userAnswer = selected.value;
      if (userAnswer === item.answer) {
        score++;
        selected.parentElement.style.color = "var(--correct-color)";
      } else {
        selected.parentElement.style.color = "var(--wrong-color)";
      }
    }
  });
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = `Your Score: ${score}/${quizData[level].length} 🎉<br>${score === quizData[level].length ? "Full marks, bro! 😎" : "Keep grinding! 🚀"}`;
  resultDiv.className = "result animate__animated animate__bounceIn";
}

// Level selection
document.addEventListener("DOMContentLoaded", () => {
  renderQuiz("level1"); // Default to Level 1
  document.getElementById("levelSelect").addEventListener("change", function () {
    const selectedLevel = this.value;
    renderQuiz(selectedLevel);
    document.getElementById("submitQuiz").onclick = () => checkAnswers(selectedLevel);
  });

  document.getElementById("submitQuiz").onclick = () => checkAnswers("level1");

  // Toggle sidebar
  document.querySelector('.navbar-toggler').addEventListener('click', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    sidebar.classList.toggle('active');
    main.classList.toggle('shifted');
  });

  // Responsive adjustment
  window.addEventListener('resize', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    if (window.innerWidth >= 1024) {
      sidebar.classList.remove('active');
      main.classList.remove('shifted');
      main.style.marginLeft = '250px';
    } else if (window.innerWidth >= 768) {
      main.style.marginLeft = sidebar.classList.contains('active') ? '0' : '200px';
    } else {
      main.style.marginLeft = '0';
    }
  });

  // Initial load adjustment
  window.addEventListener('load', function () {
    const sidebar = document.querySelector('.sidebar');
    const main = document.querySelector('main');
    if (window.innerWidth >= 1024) {
      main.style.marginLeft = '250px';
    } else if (window.innerWidth >= 768) {
      main.style.marginLeft = '200px';
    } else {
      main.style.marginLeft = '0';
    }
  });
});